"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.js":
/*!***********************!*\
  !*** ./middleware.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var cookies_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cookies-next */ \"(middleware)/./node_modules/cookies-next/lib/index.js\");\n/* harmony import */ var cookies_next__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cookies_next__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"(middleware)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// Flag to prevent infinite redirection loop\nlet redirected = false;\nfunction middleware(request) {\n    const token = (0,cookies_next__WEBPACK_IMPORTED_MODULE_1__.getCookie)(\"CF_Authorization\");\n    // const token =\n    //   \"eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg0MDMyZGMxOTM2ZWEwMzI4ZWZjZjk2ZWNiODkzMzBjYzgxZmQwZWQ2YzQyYjUwNjFjOWMyNjM3YWY2MmVhMTEifQ.eyJhdWQiOlsiMmNkNDA5MWI0MmY2MjM3YWMyOTI4ZWRmZTc5YmU5YWYxMWI0Y2Y0ZDU4ODM0NTUzYjk5NjMxZDZkYTU2OTQ3MyJdLCJlbWFpbCI6InRvdXNlZWYuZXhlcnRsb2dpY3NAZ21haWwuY29tIiwiZXhwIjoxNzE3ODg3OTQ4LCJpYXQiOjE3MTUyNTk5NDgsIm5iZiI6MTcxNTI1OTk0OCwiaXNzIjoiaHR0cHM6Ly9leGVydGxvZ2ljcy5jbG91ZGZsYXJlYWNjZXNzLmNvbSIsInR5cGUiOiJhcHAiLCJpZGVudGl0eV9ub25jZSI6InQ2Vlk1cWJUY2treUMwdjYiLCJzdWIiOiIwZjBkOWE4MC01MGI1LTVjOTktODIxMy1mYTg3NTZhZmI2OTYiLCJjb3VudHJ5IjoiUEsifQ.dE0aUUjaWSqfqC8Rxj7GTA-Gep1MIFIp-iQMORkwgsYxs6p6ORlNf6VUHwn1gY_jCjAtnZxH41UgBi3QagukhQt9eDhbAwUR5Aob1fCU2_sQkBjAk1ZaiecI-90uhrxPI9Ix_YAlj596I_-LnoQ1w-HfwZKX9hNs7LJ_90B5oSPAgl5iY94kkODDh7V4Oxh0VCYQ3NKijq79GBrd1wgrv6qD90c5JMwwjWeoZ7yujODaC7JC3NI3sohrbNlSB7yguNQr3_BaApKOOxIgO0-Zc8cKeDZKjHRoq8jNalzW-vuqoM-6qputtLMbeb11KnoceVrWxqiqLTdPuoVBB4mysQ\";\n    console.log(token);\n    console.log(\"middleware\");\n    // Check if the request is coming from localhost\n    const isLocalhost = request.headers.get(\"host\").startsWith(\"localhost\");\n    if (!token && !isLocalhost && !redirected) {\n        // Redirect only if the request is not from localhost, CF_Authorization token is missing,\n        // and redirection hasn't already been attempted\n        redirected = true; // Set the flag to true to prevent further redirection\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/\", request.url));\n    }\n    if (token) {\n        try {\n            const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().verify(token, process.env.JWT_SECRET, {\n                algorithms: [\n                    \"HS256\"\n                ]\n            });\n            console.log(\"Token verified and decoded:\", decoded);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        } catch (err) {\n            console.log(\"Token verification failed:\", err);\n        }\n    }\n    // If the token is missing or invalid and the request is from localhost, proceed to the next response\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n} // export function middleware(request) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkM7QUFDRjtBQUNWO0FBRS9CLDRDQUE0QztBQUM1QyxJQUFJRyxhQUFhO0FBRVYsU0FBU0MsV0FBV0MsT0FBTztJQUNoQyxNQUFNQyxRQUFRTCx1REFBU0EsQ0FBQztJQUN4QixnQkFBZ0I7SUFDaEIsdzRCQUF3NEI7SUFDeDRCTSxRQUFRQyxHQUFHLENBQUNGO0lBQ1pDLFFBQVFDLEdBQUcsQ0FBQztJQUVaLGdEQUFnRDtJQUNoRCxNQUFNQyxjQUFjSixRQUFRSyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxRQUFRQyxVQUFVLENBQUM7SUFFM0QsSUFBSSxDQUFDTixTQUFTLENBQUNHLGVBQWUsQ0FBQ04sWUFBWTtRQUN6Qyx5RkFBeUY7UUFDekYsZ0RBQWdEO1FBQ2hEQSxhQUFhLE1BQU0sc0RBQXNEO1FBQ3pFLE9BQU9ILHFEQUFZQSxDQUFDYSxRQUFRLENBQUMsSUFBSUMsSUFBSSxLQUFLVCxRQUFRVSxHQUFHO0lBQ3ZEO0lBRUEsSUFBSVQsT0FBTztRQUNULElBQUk7WUFDRixNQUFNVSxVQUFVZCwwREFBVSxDQUFDSSxPQUFPWSxRQUFRQyxHQUFHLENBQUNDLFVBQVUsRUFBRTtnQkFDeERDLFlBQVk7b0JBQUM7aUJBQVE7WUFDdkI7WUFFQWQsUUFBUUMsR0FBRyxDQUFDLCtCQUErQlE7WUFFM0MsT0FBT2hCLHFEQUFZQSxDQUFDc0IsSUFBSTtRQUMxQixFQUFFLE9BQU9DLEtBQUs7WUFDWmhCLFFBQVFDLEdBQUcsQ0FBQyw4QkFBOEJlO1FBQzVDO0lBQ0Y7SUFFQSxxR0FBcUc7SUFDckcsT0FBT3ZCLHFEQUFZQSxDQUFDc0IsSUFBSTtBQUMxQixFQUVBLHlDQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9taWRkbGV3YXJlLmpzPzNiY2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCB7IGdldENvb2tpZSB9IGZyb20gXCJjb29raWVzLW5leHRcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcblxyXG4vLyBGbGFnIHRvIHByZXZlbnQgaW5maW5pdGUgcmVkaXJlY3Rpb24gbG9vcFxyXG5sZXQgcmVkaXJlY3RlZCA9IGZhbHNlO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdCkge1xyXG4gIGNvbnN0IHRva2VuID0gZ2V0Q29va2llKFwiQ0ZfQXV0aG9yaXphdGlvblwiKTtcclxuICAvLyBjb25zdCB0b2tlbiA9XHJcbiAgLy8gICBcImV5SmhiR2NpT2lKU1V6STFOaUlzSW10cFpDSTZJamcwTURNeVpHTXhPVE0yWldFd016STRaV1pqWmprMlpXTmlPRGt6TXpCall6Z3habVF3WldRMll6UXlZalV3TmpGak9XTXlOak0zWVdZMk1tVmhNVEVpZlEuZXlKaGRXUWlPbHNpTW1Oa05EQTVNV0kwTW1ZMk1qTTNZV015T1RJNFpXUm1aVGM1WW1VNVlXWXhNV0kwWTJZMFpEVTRPRE0wTlRVellqazVOak14WkRaa1lUVTJPVFEzTXlKZExDSmxiV0ZwYkNJNkluUnZkWE5sWldZdVpYaGxjblJzYjJkcFkzTkFaMjFoYVd3dVkyOXRJaXdpWlhod0lqb3hOekUzT0RnM09UUTRMQ0pwWVhRaU9qRTNNVFV5TlRrNU5EZ3NJbTVpWmlJNk1UY3hOVEkxT1RrME9Dd2lhWE56SWpvaWFIUjBjSE02THk5bGVHVnlkR3h2WjJsamN5NWpiRzkxWkdac1lYSmxZV05qWlhOekxtTnZiU0lzSW5SNWNHVWlPaUpoY0hBaUxDSnBaR1Z1ZEdsMGVWOXViMjVqWlNJNkluUTJWbGsxY1dKVVkydHJlVU13ZGpZaUxDSnpkV0lpT2lJd1pqQmtPV0U0TUMwMU1HSTFMVFZqT1RrdE9ESXhNeTFtWVRnM05UWmhabUkyT1RZaUxDSmpiM1Z1ZEhKNUlqb2lVRXNpZlEuZEUwYVVVamFXU3FmcUM4UnhqN0dUQS1HZXAxTUlGSXAtaVFNT1Jrd2dzWXhzNnA2T1JsTmY2VlVId24xZ1lfakNqQXRuWnhINDFVZ0JpM1FhZ3VraFF0OWVEaGJBd1VSNUFvYjFmQ1UyX3NRa0JqQWsxWmFpZWNJLTkwdWhyeFBJOUl4X1lBbGo1OTZJXy1Mbm9RMXctSGZ3WktYOWhOczdMSl85MEI1b1NQQWdsNWlZOTRra09ERGg3VjRPeGgwVkNZUTNOS2lqcTc5R0JyZDF3Z3J2NnFEOTBjNUpNd3dqV2VvWjd5dWpPRGFDN0pDM05JM3NvaHJiTmxTQjd5Z3VOUXIzX0JhQXBLT094SWdPMC1aYzhjS2VEWktqSFJvcThqTmFselctdnVxb00tNnFwdXR0TE1iZWIxMUtub2NlVnJXeHFpcUxUZFB1b1ZCQjRteXNRXCI7XHJcbiAgY29uc29sZS5sb2codG9rZW4pO1xyXG4gIGNvbnNvbGUubG9nKFwibWlkZGxld2FyZVwiKTtcclxuXHJcbiAgLy8gQ2hlY2sgaWYgdGhlIHJlcXVlc3QgaXMgY29taW5nIGZyb20gbG9jYWxob3N0XHJcbiAgY29uc3QgaXNMb2NhbGhvc3QgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiaG9zdFwiKS5zdGFydHNXaXRoKFwibG9jYWxob3N0XCIpO1xyXG5cclxuICBpZiAoIXRva2VuICYmICFpc0xvY2FsaG9zdCAmJiAhcmVkaXJlY3RlZCkge1xyXG4gICAgLy8gUmVkaXJlY3Qgb25seSBpZiB0aGUgcmVxdWVzdCBpcyBub3QgZnJvbSBsb2NhbGhvc3QsIENGX0F1dGhvcml6YXRpb24gdG9rZW4gaXMgbWlzc2luZyxcclxuICAgIC8vIGFuZCByZWRpcmVjdGlvbiBoYXNuJ3QgYWxyZWFkeSBiZWVuIGF0dGVtcHRlZFxyXG4gICAgcmVkaXJlY3RlZCA9IHRydWU7IC8vIFNldCB0aGUgZmxhZyB0byB0cnVlIHRvIHByZXZlbnQgZnVydGhlciByZWRpcmVjdGlvblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKFwiL1wiLCByZXF1ZXN0LnVybCkpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHRva2VuKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwge1xyXG4gICAgICAgIGFsZ29yaXRobXM6IFtcIkhTMjU2XCJdLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiVG9rZW4gdmVyaWZpZWQgYW5kIGRlY29kZWQ6XCIsIGRlY29kZWQpO1xyXG5cclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJUb2tlbiB2ZXJpZmljYXRpb24gZmFpbGVkOlwiLCBlcnIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gSWYgdGhlIHRva2VuIGlzIG1pc3Npbmcgb3IgaW52YWxpZCBhbmQgdGhlIHJlcXVlc3QgaXMgZnJvbSBsb2NhbGhvc3QsIHByb2NlZWQgdG8gdGhlIG5leHQgcmVzcG9uc2VcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcclxufVxyXG5cclxuLy8gZXhwb3J0IGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdCkge31cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldENvb2tpZSIsImp3dCIsInJlZGlyZWN0ZWQiLCJtaWRkbGV3YXJlIiwicmVxdWVzdCIsInRva2VuIiwiY29uc29sZSIsImxvZyIsImlzTG9jYWxob3N0IiwiaGVhZGVycyIsImdldCIsInN0YXJ0c1dpdGgiLCJyZWRpcmVjdCIsIlVSTCIsInVybCIsImRlY29kZWQiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsImFsZ29yaXRobXMiLCJuZXh0IiwiZXJyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./middleware.js\n");

/***/ })

});