"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.js":
/*!***********************!*\
  !*** ./middleware.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n/* harmony import */ var cookies_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cookies-next */ \"(middleware)/./node_modules/cookies-next/lib/index.js\");\n/* harmony import */ var cookies_next__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cookies_next__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"(middleware)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// Flag to prevent infinite redirection loop\nlet redirected = false;\nfunction middleware(request) {\n    const token = (0,cookies_next__WEBPACK_IMPORTED_MODULE_1__.getCookie)(\"CF_Authorization\");\n    // const token =\n    //   \"eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg0MDMyZGMxOTM2ZWEwMzI4ZWZjZjk2ZWNiODkzMzBjYzgxZmQwZWQ2YzQyYjUwNjFjOWMyNjM3YWY2MmVhMTEifQ.eyJhdWQiOlsiMmNkNDA5MWI0MmY2MjM3YWMyOTI4ZWRmZTc5YmU5YWYxMWI0Y2Y0ZDU4ODM0NTUzYjk5NjMxZDZkYTU2OTQ3MyJdLCJlbWFpbCI6InRvdXNlZWYuZXhlcnRsb2dpY3NAZ21haWwuY29tIiwiZXhwIjoxNzE3ODg3OTQ4LCJpYXQiOjE3MTUyNTk5NDgsIm5iZiI6MTcxNTI1OTk0OCwiaXNzIjoiaHR0cHM6Ly9leGVydGxvZ2ljcy5jbG91ZGZsYXJlYWNjZXNzLmNvbSIsInR5cGUiOiJhcHAiLCJpZGVudGl0eV9ub25jZSI6InQ2Vlk1cWJUY2treUMwdjYiLCJzdWIiOiIwZjBkOWE4MC01MGI1LTVjOTktODIxMy1mYTg3NTZhZmI2OTYiLCJjb3VudHJ5IjoiUEsifQ.dE0aUUjaWSqfqC8Rxj7GTA-Gep1MIFIp-iQMORkwgsYxs6p6ORlNf6VUHwn1gY_jCjAtnZxH41UgBi3QagukhQt9eDhbAwUR5Aob1fCU2_sQkBjAk1ZaiecI-90uhrxPI9Ix_YAlj596I_-LnoQ1w-HfwZKX9hNs7LJ_90B5oSPAgl5iY94kkODDh7V4Oxh0VCYQ3NKijq79GBrd1wgrv6qD90c5JMwwjWeoZ7yujODaC7JC3NI3sohrbNlSB7yguNQr3_BaApKOOxIgO0-Zc8cKeDZKjHRoq8jNalzW-vuqoM-6qputtLMbeb11KnoceVrWxqiqLTdPuoVBB4mysQ\";\n    console.log(token);\n    console.log(\"middleware\");\n    // Check if the request is coming from localhost\n    const isLocalhost = request.headers.get(\"host\").startsWith(\"localhost\");\n    if (!token && !isLocalhost && !redirected) {\n        // Redirect only if the request is not from localhost, CF_Authorization token is missing,\n        // and redirection hasn't already been attempted\n        redirected = true; // Set the flag to true to prevent further redirection\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL(\"/\", request.url));\n    }\n    if (token) {\n        try {\n            const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().verify(token, process.env.JWT_SECRET, {\n                algorithms: [\n                    \"HS256\"\n                ]\n            });\n            console.log(\"Token verified and decoded:\", decoded);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n        } catch (err) {\n            console.log(\"Token verification failed:\", err);\n        }\n    }\n    // If the token is missing or invalid and the request is from localhost, proceed to the next response\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n} // export function middleware(request) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkM7QUFDRjtBQUNWO0FBRS9CLDRDQUE0QztBQUM1QyxJQUFJRyxhQUFhO0FBRVYsU0FBU0MsV0FBV0MsT0FBTztJQUNoQyxNQUFNQyxRQUFRTCx1REFBU0EsQ0FBQztJQUV4QixnQkFBZ0I7SUFDaEIsdzRCQUF3NEI7SUFFeDRCTSxRQUFRQyxHQUFHLENBQUNGO0lBQ1pDLFFBQVFDLEdBQUcsQ0FBQztJQUVaLGdEQUFnRDtJQUNoRCxNQUFNQyxjQUFjSixRQUFRSyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxRQUFRQyxVQUFVLENBQUM7SUFFM0QsSUFBSSxDQUFDTixTQUFTLENBQUNHLGVBQWUsQ0FBQ04sWUFBWTtRQUN6Qyx5RkFBeUY7UUFDekYsZ0RBQWdEO1FBQ2hEQSxhQUFhLE1BQU0sc0RBQXNEO1FBQ3pFLE9BQU9ILHFEQUFZQSxDQUFDYSxRQUFRLENBQUMsSUFBSUMsSUFBSSxLQUFLVCxRQUFRVSxHQUFHO0lBQ3ZEO0lBRUEsSUFBSVQsT0FBTztRQUNULElBQUk7WUFDRixNQUFNVSxVQUFVZCwwREFBVSxDQUFDSSxPQUFPWSxRQUFRQyxHQUFHLENBQUNDLFVBQVUsRUFBRTtnQkFDeERDLFlBQVk7b0JBQUM7aUJBQVE7WUFDdkI7WUFFQWQsUUFBUUMsR0FBRyxDQUFDLCtCQUErQlE7WUFFM0MsT0FBT2hCLHFEQUFZQSxDQUFDc0IsSUFBSTtRQUMxQixFQUFFLE9BQU9DLEtBQUs7WUFDWmhCLFFBQVFDLEdBQUcsQ0FBQyw4QkFBOEJlO1FBQzVDO0lBQ0Y7SUFFQSxxR0FBcUc7SUFDckcsT0FBT3ZCLHFEQUFZQSxDQUFDc0IsSUFBSTtBQUMxQixFQUVBLHlDQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9taWRkbGV3YXJlLmpzPzNiY2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCB7IGdldENvb2tpZSB9IGZyb20gXCJjb29raWVzLW5leHRcIjtcclxuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XHJcblxyXG4vLyBGbGFnIHRvIHByZXZlbnQgaW5maW5pdGUgcmVkaXJlY3Rpb24gbG9vcFxyXG5sZXQgcmVkaXJlY3RlZCA9IGZhbHNlO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdCkge1xyXG4gIGNvbnN0IHRva2VuID0gZ2V0Q29va2llKFwiQ0ZfQXV0aG9yaXphdGlvblwiKTtcclxuXHJcbiAgLy8gY29uc3QgdG9rZW4gPVxyXG4gIC8vICAgXCJleUpoYkdjaU9pSlNVekkxTmlJc0ltdHBaQ0k2SWpnME1ETXlaR014T1RNMlpXRXdNekk0WldaalpqazJaV05pT0Rrek16QmpZemd4Wm1Rd1pXUTJZelF5WWpVd05qRmpPV015TmpNM1lXWTJNbVZoTVRFaWZRLmV5SmhkV1FpT2xzaU1tTmtOREE1TVdJME1tWTJNak0zWVdNeU9USTRaV1JtWlRjNVltVTVZV1l4TVdJMFkyWTBaRFU0T0RNME5UVXpZams1TmpNeFpEWmtZVFUyT1RRM015SmRMQ0psYldGcGJDSTZJblJ2ZFhObFpXWXVaWGhsY25Sc2IyZHBZM05BWjIxaGFXd3VZMjl0SWl3aVpYaHdJam94TnpFM09EZzNPVFE0TENKcFlYUWlPakUzTVRVeU5UazVORGdzSW01aVppSTZNVGN4TlRJMU9UazBPQ3dpYVhOeklqb2lhSFIwY0hNNkx5OWxlR1Z5ZEd4dloybGpjeTVqYkc5MVpHWnNZWEpsWVdOalpYTnpMbU52YlNJc0luUjVjR1VpT2lKaGNIQWlMQ0pwWkdWdWRHbDBlVjl1YjI1alpTSTZJblEyVmxrMWNXSlVZMnRyZVVNd2RqWWlMQ0p6ZFdJaU9pSXdaakJrT1dFNE1DMDFNR0kxTFRWak9Ua3RPREl4TXkxbVlUZzNOVFpoWm1JMk9UWWlMQ0pqYjNWdWRISjVJam9pVUVzaWZRLmRFMGFVVWphV1NxZnFDOFJ4ajdHVEEtR2VwMU1JRklwLWlRTU9Sa3dnc1l4czZwNk9SbE5mNlZVSHduMWdZX2pDakF0blp4SDQxVWdCaTNRYWd1a2hRdDllRGhiQXdVUjVBb2IxZkNVMl9zUWtCakFrMVphaWVjSS05MHVocnhQSTlJeF9ZQWxqNTk2SV8tTG5vUTF3LUhmd1pLWDloTnM3TEpfOTBCNW9TUEFnbDVpWTk0a2tPRERoN1Y0T3hoMFZDWVEzTktpanE3OUdCcmQxd2dydjZxRDkwYzVKTXd3aldlb1o3eXVqT0RhQzdKQzNOSTNzb2hyYk5sU0I3eWd1TlFyM19CYUFwS09PeElnTzAtWmM4Y0tlRFpLakhSb3E4ak5hbHpXLXZ1cW9NLTZxcHV0dExNYmViMTFLbm9jZVZyV3hxaXFMVGRQdW9WQkI0bXlzUVwiO1xyXG5cclxuICBjb25zb2xlLmxvZyh0b2tlbik7XHJcbiAgY29uc29sZS5sb2coXCJtaWRkbGV3YXJlXCIpO1xyXG5cclxuICAvLyBDaGVjayBpZiB0aGUgcmVxdWVzdCBpcyBjb21pbmcgZnJvbSBsb2NhbGhvc3RcclxuICBjb25zdCBpc0xvY2FsaG9zdCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJob3N0XCIpLnN0YXJ0c1dpdGgoXCJsb2NhbGhvc3RcIik7XHJcblxyXG4gIGlmICghdG9rZW4gJiYgIWlzTG9jYWxob3N0ICYmICFyZWRpcmVjdGVkKSB7XHJcbiAgICAvLyBSZWRpcmVjdCBvbmx5IGlmIHRoZSByZXF1ZXN0IGlzIG5vdCBmcm9tIGxvY2FsaG9zdCwgQ0ZfQXV0aG9yaXphdGlvbiB0b2tlbiBpcyBtaXNzaW5nLFxyXG4gICAgLy8gYW5kIHJlZGlyZWN0aW9uIGhhc24ndCBhbHJlYWR5IGJlZW4gYXR0ZW1wdGVkXHJcbiAgICByZWRpcmVjdGVkID0gdHJ1ZTsgLy8gU2V0IHRoZSBmbGFnIHRvIHRydWUgdG8gcHJldmVudCBmdXJ0aGVyIHJlZGlyZWN0aW9uXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoXCIvXCIsIHJlcXVlc3QudXJsKSk7XHJcbiAgfVxyXG5cclxuICBpZiAodG9rZW4pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVULCB7XHJcbiAgICAgICAgYWxnb3JpdGhtczogW1wiSFMyNTZcIl0sXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coXCJUb2tlbiB2ZXJpZmllZCBhbmQgZGVjb2RlZDpcIiwgZGVjb2RlZCk7XHJcblxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlRva2VuIHZlcmlmaWNhdGlvbiBmYWlsZWQ6XCIsIGVycik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBJZiB0aGUgdG9rZW4gaXMgbWlzc2luZyBvciBpbnZhbGlkIGFuZCB0aGUgcmVxdWVzdCBpcyBmcm9tIGxvY2FsaG9zdCwgcHJvY2VlZCB0byB0aGUgbmV4dCByZXNwb25zZVxyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xyXG59XHJcblxyXG4vLyBleHBvcnQgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0KSB7fVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0Q29va2llIiwiand0IiwicmVkaXJlY3RlZCIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwidG9rZW4iLCJjb25zb2xlIiwibG9nIiwiaXNMb2NhbGhvc3QiLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwiZGVjb2RlZCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiYWxnb3JpdGhtcyIsIm5leHQiLCJlcnIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./middleware.js\n");

/***/ })

});